# Система контроля версий Git
## Команды линукс
```
ls - проверить что лежит в папке.
cd path - переход по нужному пути.
mkdir nameFolder - создает папку.
touch nameFile - создает файл.
cat nameFile - просмотреть содержимое файла.
git rm -r nameDirectory - удаление директории, при непроиндексированном изменении гит будет ругаться.
git rm -f nameFile - удаляет непроиндексированный файл.
git mv index.html hello.html - переименует файл index.html в hello.html.
```
## Игнорирование
```
.gitignore — текстовый файл, в котором задаются правила для исключения файлов из репозитория. 
Например:
*.log
build/
temp-*
git ls-files --other --ignored --exclude-standard — список всех игнорируемых файлов.
```
## Конфигурация
```
git config --global user.name "name" — установить имя, которое будет прикрепляться к коммиту.
git config --global user.email "email address" — установить email, который будет прикрепляться к коммиту.
git config --global color.ui auto — включить полезную подсветку командной строки.
git config --global push.default current — обновлять удаленную ветку с таким же именем, что и локальная, при пуше изменений (если не указано иного).
git config --global core.editor editor — установить редактор для редактирования сообщений коммита.
```
## Просмотр истории
```
git log - посмотреть историю.
git log --oneline - однострочный просмотр истории.
git log --all - посмотреть всю историю.
git reflog - выведет всю историю, даже недостижимые коммиты.
git reflog nameBranch - посмотреть историю в nameBranch.
git reflog --date=iso - покажет даты изменений.
git log --no-merges master.. — посмотреть историю изменений только для текущей ветки.
git show [commit] — показать метадату и изменения в заданном коммите.
git show [branch]:[file] — посмотреть на файл в другой ветке, не переключаясь на неё.
```
## Статус
```
git status — полный список изменений файлов, ожидающих коммита.
git status -s — краткий вид изменений.
```
## Индекс
```
git add fileName — сделать указанный файл готовым для коммита.
git add . — сделать все измененные файлы готовыми для коммита.
git add '*.txt' — добавить только файлы, соответствующие указанному выражению.
git add --patch fileName — позволяет выбрать какие изменения из файла добавятся в коммит.
```
### Снять индексацию
```
git reset nameFile - снять индексацию с add файла (изменения не теряются).
git reset HEAD nameFile - снять индексацию с add файла, но не измененяет рабочий каталог. Чтобы удалить нежелательные изменения нужно сделать git checkout файл.
```
## Коммиты
```
git commit -am "commit" - закоммитить все измененные файлы одним коммитом. С этой командой нужно быть осторожнее, чтобы не закоммитить лишнего.
git commit -m "commit" nameFile - создать коммит нужного файла.
```
### Исправление предыдущего коммита
```
git commit --amend -m "commit" - изменение предыдущего коммита (если забыл что-то добавить), чтобы обойтись одним коммитом.
git commit --amend --reset-autor - уберет автора и сделает автором текущего пользователя.
```
### Копирование коммита
```
git cherry-pick hashCommit - скопирует коммит.
```
### Отмена коммита
```
git reset [commit/tag] — отменить все коммиты после указанного коммита, изменения будут сохранены локально.
git reset --hard к чему откат (хеш коммита, тег) - откат к нужному коммиту либо тегу.
git reset --keep - оставит изменения в файлах, но убирет незакоммиченные файлы из индекса.
```
## Сравнение
```
git diff — показать изменения в файлах, которые еще не были добавлены в индекс коммита (staged).
git diff --staged — показать что было добавленно в индекс с помощью git add, но еще не было закоммиченно.
git diff HEAD — показать что изменилось с последнего коммита.
git diff HEAD^ — показать что изменилось с предпоследнего коммита.
git diff nameBranch — сравнить текущую ветку с заданной.
git diff hashCommit_1 hashCommit_2 - сравнит изменения в двух коммитах.
git diff [file-branch]..[second-branch] — посмотреть различия между двумя заданными ветками.
```
## Откаты
```
git checkout nameFile - откат последнего изменения в файле.
git revert HEAD --no-edit - откат на предыдущий коммит без открытия в редакторе.
```
## Архивирование файлов
```
git stash — положить во временное хранилище все отслеживаемые файлы.
git stash pop — восстановить последние файлы, положенные во временное хранилище.
git stash list — список всех сохраненных изменений во временном хранилище.
git stash drop — удалить последние файлы, положенные во временное хранилище.
git stash apply - показать спрятаные изменения.
```
## Ветки
```
git branch - посмотреть доступные ветки.
git branch -a - посмотреть все ветки, включая удаленные.
git branch nameBranch - создает ветку.
git checkout -b nameBranch - создать ветку и переключится на нее.
git checkout -b myfeature develop - создать ветку myfeature от ветки develop и переключиться на нее.
git branch -m oldName newName — переименовать ветку.
```
### Переключение веток
```
git checkout nameBranch - переключиться на нужную ветку.
git checkout @{-1} - перключится на переключенную ветку. Можно использовать любое другое отрицательное число.
```
### Удаление веток
```
git branch -d nameBranch - удалить ветку.
git branch -D nameBranch - удалить ветку, даже если она не влита в основную ветку.
```
### Восстановление веток
```
git branch nameBranch hashCommit - восстановить удаленную ветку.
git branch nameBranch 'HEAD@{number}' - восстановить удаленную ветку из reflog через ее номер.
git branch nameBranch 'HEAD@{"date"}' - восстановить удаленную ветку из reflog через ее дату.
```
## Слияние 
```
git merge nameBranch - слить включенную ветку с которой мы хотим, если возникли конфликты необходимо их решить. После решения конфликтов проиндексировать файлы и сделать их коммит.
git merge --no-ff nameBranch - флаг --no-ff вынуждает Git всегда создавать новый объект коммита при слиянии. Это позволяет не терять информацию о том, что ветка существовала, и группирует вместе все внесённые изменения. Таким образом можно отследить какая группа коммитов образует ту или иную функциональность.
```
### Отмена слияния
```
git reset --merge - отменит слияние.
```
## Перебазирование
```
git rebase nameBranch - перебазирует изменения из нужной ветки во включенную. Конечный результат перебазирования очень похож на результат слияния. Однако из нужной ветки прилетят все коммиты.
git rebase --abort - вернет все назад.

Не используйте перебазировние:
1. Если ветка является публичной и расшаренной. Переписывание общих веток будет мешать работе других членов команды.
2. Когда важна точная история коммитов ветки (так как команда rebase переписывает историю коммитов).
```
## Удаленные репозитории
```
git remote - узнать об именах удаленных репозиториев.
git remote -v — посмотреть детальный список доступных удаленных репозиториев.
git remote add [remote][url] — добавить новый удаленный репозиторий.
git branch --track style origin/style - добавить локальную ветку style, которая отслеживает удаленную ветку origin/style.
```
### Клонирование
```
git clone nameRepos nameClone - сначала нужно от корня репозитория выполнить команду cd .. , далее выполнить команду клонирования.
```
### Получение изменений
```
git fetch - извлекает новые коммиты из удаленного репозитория, но не сливает их с наработками в локальном репозитории.
git merge origin/master - сливает удаленный репозиторий с локальным после извлеченных изменений.
git pull origin master - выполняет сразу две команды git fetch и git merge origin/master.
git pull [remote][branch] — указать конкретную удаленную ветку для слияния.
```
### Отправка изменений 
```
git push origin master - отправка измений в удаленную ветку master.
git push --force - запушить изменения не смотря на конфликты.
git push [remote] [branch] — запушить ветку в указанный репозиторий и удаленную ветку.
git push [bookmark] :[branch] — в удаленном репозитории удалить заданную ветку.
git push -u origin master — если удаленная ветка не установлена как отслеживаемая, то сделать ее такой.
```
## Чистые репозитории
```
git clone --bare hello hello.git - создает чистый репозиторий директории hello.
git remote add shared ../hello.git - добавление удаленного чистого репозитория к нашему оригинальному.
```
## Алиасы
```
git config --global alias.hist "log --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short" - алиас для просмотра истории.
git config --global alias.go checkout - алиас checkout, вместо команды checkout можно теперь использовать go.
```
## Теги
```
git tag nameTag - создать тег.
git tag - просмотреть доступные теги.
git hist master --all - просмотреть теги в коммитах.
git tag nameTag^ - переход к предыдущему тегу.
git tag -d tagName - удаление тега (вместе с ним потруться все коммиты, которые в нем были). 
```
## Подмодули
```
git submodule add URL Project - добавление нового подмодуля.
git submodule init - инициализация локального конфигурационного файла (нужно выполнить после клонирования проекта с подмодулями).
git submodule update – для извлечения всех данных этого проекта и переключения на соответствующий коммит, указанный в вашем основном проекте (нужно выполнить после клонирования проекта с подмодулями).
git clone --recursive URL project - команда --recursive автоматически инициализирует и обновит каждый модуль.
git submodule update --remote nameSubmodule - обновит подмодуль.
```
### Получение изменений из другой ветки (подмодули)
```
git config -f .gitmodules submodule.DbConnector.branch nameBranch - изменения будут прилетать в подмодуль DbConnector из ветки nameBranch.
```
